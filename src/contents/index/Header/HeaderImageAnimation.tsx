import clsx from 'clsx';
import { m } from 'framer-motion';

const animation = {
  hide: { pathLength: 0 },
  show: (i: number) => {
    const delay = 0.6 + i * 0.1;
    return {
      pathLength: 1,
      transition: {
        pathLength: { delay, duration: 1 },
      },
    };
  },
};

interface HeaderImageAnimationProps {
  onAnimationComplete?: () => void;
  isAnimated?: boolean;
}

function HeaderImageAnimation({
  onAnimationComplete = () => {},
  isAnimated = true,
}: HeaderImageAnimationProps) {
  const PathComponent = isAnimated ? m.path : 'path';

  const animatedPath =
    'M101.85,70.85s1.01-.92-8.11.79-18.76,9.79-18.76,9.79l-3.62.63c-12.05,3.44-24.56,9.52-24.56,9.52,4.44,4.35,13.32-.82,13.32-.82-16.31,13.14-33.35,4.26-33.35,4.26,3.81,11.69,14.86,11.96,14.86,11.96-25.37,12.69-25.1,36.79-24.56,33.62s16.4-15.95,16.4-15.95c-12.96,11.69-9.42,28-9.42,28l6.62-8.79c-10.97,22.47-24.65,10.24-24.65,10.24,0,0,.45,5.62,10.6,10.33s19.39-9.52,19.39-9.52c0,0-2.54,3.62-7.79,14.86s5.17,20.66,5.17,20.66c-3.17-13.41,6.07-30.45,6.07-30.45,0,0-3.26,6.34-2.36,15.95s11.24,16.67,11.96,16.04-1.63-3.62-3.72-7.07-.27-7.16.97-4.53,10.45,14.86,10.99,12.42-1.72-7.43-1.72-7.43l4.98,6.43-.09,7.52-.82,23.74s10.33,8.52,11.24,13.05-7.34,18.85-7.34,18.85l-17.22,36.43c-.82,12.96,18.94,11.06,25.01,12.23s3.44,11.96,3.44,11.96c0,0-2.17,11.78,6.98,9.9s20.84.43,20.84.43c-3.62-1.63-16.86,1.9-16.86,1.9v7.61c0,1.99,5.53,4.98,8.97,10.87s.63,17.85.72,19.66,2.9,15.13,23.38,15.04,60.35-31.99,60.35-31.99c0,0-20.3,16.04-18.21,16.04s8.27,4.2,10.53,9.29,6.78,16.95,15.25,21.47,9.6,18.64,9.6,18.64c-24.86,15.82-39.55,35.59-43.5,42.94s-27.68,68.59-27.68,68.59';

  const staticPath =
    'M167.53,226.9s24.28,27.29,35.01,31.44,18.26,4.71,30.49.38,33.32-25.04,38.59-30.12c3.44-3.32,7.04-8.71,9.96-14.42.28-.55.56-1.1.82-1.65,1.22-2.51,2.29-5.05,3.15-7.46,3.01-8.47,7.91-43.86,7.91-43.86,0,0,1.13-33.51,1.51-35.76s-6.96-13.55-6.96-13.55c.94-15.44-1.69-27.29-8.47-36.89s-25.22-4.33-25.22-4.33c3.39-2.45,1.51-4.14,1.51-4.14-5.08,3.2-23.34,5.27-23.34,5.27,8.47-7.53-2.64-3.58-3.49-3.58s-12.7,4.71-12.7,4.71l-15.44-4.14-.38,2.07-12.24-4.33,3.67,4.24c-13.84-4.8-25.69,0-25.69,0-11.86,6.21-13.27,36.14-13.27,36.14l-3.11,13.84.85,42.64,4.66,35.15s.99,3.53,2.26,10.45,8.89,16.94,8.89,16.94l2.19,37.34s.78-.21-2.12.28-12.42,6-17.22,10.52-62.4,34.45-80.47,39.53-31.91,24.56-35.86,31.06-9.88,26.54-9.88,26.54L.48,449.07';

  return (
    <m.svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 457 526"
      fill="none"
      initial={isAnimated ? 'hide' : undefined}
      animate={isAnimated ? 'show' : undefined}
      strokeWidth={1.5}
      strokeLinecap="round"
      strokeLinejoin="round"
      className={clsx(
        'stroke-accent-500 h-[526px] w-[457px] opacity-60',
        'dark:opacity-40'
      )}
      onAnimationComplete={onAnimationComplete}
    >
      <PathComponent
        variants={isAnimated ? animation : undefined}
        custom={1}
        d={isAnimated ? animatedPath : staticPath}
      />
    </m.svg>
  );
}

export default HeaderImageAnimation;
